# API Reference

아래 표는 ERP 승인 시스템의 주요 REST 엔드포인트를 서비스 도메인별로 정리한 것입니다. 모든 응답은 `application/json`이며 오류 시 표준 HTTP 상태 코드와 메시지를 반환합니다.

| Method | Endpoint | Request                                                                                                                                                                                                                                | Response / Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --- | --- |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| GET | `/employees` | Query params: `department`(optional), `position`(optional)                                                                                                                                                                             | `200 OK` – <code>[<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;"id": 1,<br>&nbsp;&nbsp;&nbsp;&nbsp;"name": "홍길동",<br>&nbsp;&nbsp;&nbsp;&nbsp;"department": "Finance",<br>&nbsp;&nbsp;&nbsp;&nbsp;"position": "Manager"<br>&nbsp;&nbsp;}<br>]</code><br>직원 목록 조회                                                                                                                                                                                                                                  |
| GET | `/employees/{id}` | Path: `id` (Long)                                                                                                                                                                                                                      | `200 OK` – <code>{<br>&nbsp;&nbsp;"id": 1,<br>&nbsp;&nbsp;"name": "홍길동",<br>&nbsp;&nbsp;"department": "Finance",<br>&nbsp;&nbsp;"position": "Manager"<br>}</code><br>직원 단건 조회                                                                                                                                                                                                                                                                                                                    |
| POST | `/employees` | Body: <code>{<br>&nbsp;&nbsp;"name": "홍길동",<br>&nbsp;&nbsp;"position": "Manager",<br>&nbsp;&nbsp;"department": "Finance"<br>}</code>                                                                                                   | `201 Created` – <code>{<br>&nbsp;&nbsp;"id": 1<br>}</code><br>직원 생성                                                                                                                                                                                                                                                                                                                                                                                                                              |
| PUT | `/employees/{id}` | Path: `id`; Body: <code>{<br>&nbsp;&nbsp;"department": "Finance",<br>&nbsp;&nbsp;"position": "Director"<br>}</code>                                                                                                                    | `200 OK` – <code>{<br>&nbsp;&nbsp;"id": 1,<br>&nbsp;&nbsp;"name": "홍길동",<br>&nbsp;&nbsp;"department": "Finance",<br>&nbsp;&nbsp;"position": "Director"<br>}</code><br>직원 정보 수정                                                                                                                                                                                                                                                                                                                   |
| DELETE | `/employees/{id}` | Path: `id`                                                                                                                                                                                                                             | `204 No Content`<br>직원 삭제                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| GET | `/approvals` | -                                                                                                                                                                                                                                      | `200 OK` – <code>[<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;"requestId": 1001,<br>&nbsp;&nbsp;&nbsp;&nbsp;"requesterId": 1,<br>&nbsp;&nbsp;&nbsp;&nbsp;"title": "연차 신청",<br>&nbsp;&nbsp;&nbsp;&nbsp;"content": "11/20~11/22 휴가",<br>&nbsp;&nbsp;&nbsp;&nbsp;"steps": [ … ],<br>&nbsp;&nbsp;&nbsp;&nbsp;"finalStatus": "in_progress",<br>&nbsp;&nbsp;&nbsp;&nbsp;"createdAt": "2024-05-12T03:10:11Z",<br>&nbsp;&nbsp;&nbsp;&nbsp;"updatedAt": null<br>&nbsp;&nbsp;}<br>]</code><br>승인 요청 전체 조회 |
| GET | `/approvals/{requestId}` | Path: `requestId` (Long)                                                                                                                                                                                                               | `200 OK` – 동일 구조<br>승인 요청 단건 조회                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| POST | `/approvals` | Body: <code>{<br>&nbsp;&nbsp;"requesterId": 1,<br>&nbsp;&nbsp;"title": "연차 신청",<br>&nbsp;&nbsp;"content": "11/20~11/22 휴가",<br>&nbsp;&nbsp;"steps": [ { "step": 1, "approverId": 101 }, { "step": 2, "approverId": 102 } ]<br>}</code> | `201 Created` – <code>{<br>&nbsp;&nbsp;"requestId": 1001<br>}</code><br>승인 요청 생성 및 RabbitMQ 발행                                                                                                                                                                                                                                                                                                                                                                                                   |
| GET | `/process/{approverId}` | Path: `approverId` (Long)                                                                                                                                                                                                              | `200 OK` – <code>[<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;"requestId": 1001,<br>&nbsp;&nbsp;&nbsp;&nbsp;"requesterId": 1,<br>&nbsp;&nbsp;&nbsp;&nbsp;"title": "연차 신청",<br>&nbsp;&nbsp;&nbsp;&nbsp;"content": "11/20~11/22 휴가",<br>&nbsp;&nbsp;&nbsp;&nbsp;"steps": [ … ]<br>&nbsp;&nbsp;}<br>]</code><br>결재자별 대기 요청 목록                                                                                                                                                                      |
| POST | `/process/{approverId}/{requestId}` | Path: `approverId`, `requestId`<br>Body: <code>{<br>&nbsp;&nbsp;"status": "approved" \| "rejected"<br>}                                                                                                                                 | `200 OK` – <code>{<br>&nbsp;&nbsp;"status": "approved"\|"rejected"<br>}</code><br>결재 승인/반려 입력 후 결과 메시지 발행                                                                                                                                                                                                                                                                                                                                                                                         |
| WebSocket | `ws://.../ws?id={employeeId}` | Query: `id` (직원 ID)                                                                                                                                                                                                                    | 실시간 최종 승인/반려 알림 수신                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

> Approval Request Service ↔ Approval Processing Service ↔ Notification Service 간 상호작용은 RabbitMQ(`approval.requests`, `approval.results`, `notification.final`) 큐를 통해 비동기로 이루어집니다.
